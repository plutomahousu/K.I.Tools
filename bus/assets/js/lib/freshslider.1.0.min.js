(function(q){q.fn.freshslider=function(b){var m=this,y="undefined"==typeof b.range?!1:b.range,f=!y,d=b.min||0,c=(b.max||100)-d,t=b.step||1,z=b.unit||"",n="undefined"==typeof b.enabled?!0:b.enabled,a=[0,1],B="undefined"==typeof b.text?!0:b.text,u=null;if(0>c)throw Error();var r=null;!0==function(a){return a&&"[object Function]"==Object.prototype.toString.call(a)}(b.onchange)&&(r=b.onchange);var v=""+t,w=0;0<=v.indexOf(".")&&(w=v.length-v.indexOf(".")-1);b.hasOwnProperty("value")?f?a[1]=(b.value-d)/
c:b.value.length&&2==b.value.length&&(a[0]=(b.value[0]-d)/c,a[1]=(b.value[1]-d)/c):f&&(a[1]=0.5);var u=y?this.html("<div class='fsslider'><div class='fsfull-value'></div><div class='fssel-value'></div><div class='fscaret fss-left'></div><div class='fscaret fss-right'></div></div>").find(".fsslider"):this.html("<div class='fsslider'><div class='fsfull-value'></div><div class='fssel-value'></div><div class='fscaret'></div></div>").find(".fsslider"),k=q(this.find(".fscaret")[0]),p=f?k:q(this.find(".fscaret")[1]),
C=this.find(".fssel-value"),g=function(a){return t*Math.round(a/t)},l=function(){B&&(p.text((g(a[1]*c)+d).toFixed(w)+z),f||k.text((g(a[0]*c)+d).toFixed(w)+z));var e=m.width(),x=k.outerWidth(),b=p.outerWidth(),A=e-(x+b)/2;C.css({left:a[0]*e,width:(a[1]-a[0])*e});k.css({left:a[0]*A+x/2,"margin-left":-(x/2),"z-index":h?0:1});p.css({left:a[1]*A+b/2,"margin-left":-(b/2),"z-index":h?1:0});r&&(f?r(g(a[1]*c)+d):r(g(a[0]*c)+d,g(a[1]*c)+d))},h=!0,s=!1;this.mousedown(function(e){if(n){s=!0;var b=m.width(),c=
k.outerWidth(),d=p.outerWidth(),b=b-(c+d)/2,d=e.target.className;e=e.pageX-m.offset().left-c/2;e=0>e?0:e>b?b:e;if(f)a[1]=e/b,h=!0;else switch(d){case "fscaret fss-left":h=!1;a[0]=e/b;break;case "fscaret fss-right":h=!0;a[1]=e/b;break;default:e<(a[0]+a[1])/2*b?(h=!1,a[0]=e/b):(h=!0,a[1]=e/b)}l();if(event.preventDefault)event.preventDefault();else return!1}});q(document).mouseup(function(b){s&&n&&(s=!1,a[1]=g(a[1]*c)/c,f||(a[0]=g(a[0]*c)/c),l())});this.mousemove(function(b){if(n){if(s){var c=m.width(),
d=k.outerWidth(),g=p.outerWidth(),c=c-(d+g)/2;b=b.pageX-m.offset().left-d/2;b=0>b?0:b>c?c:b;f?(a[1]=b/c,h=!0):h?(a[1]=b/c,a[1]<a[0]&&(a[1]=a[0])):(a[0]=b/c,a[0]>a[1]&&(a[0]=a[1]));l()}if(event.preventDefault)event.preventDefault();else return!1}});this.getValue=function(){return f?[a[1]*c+d]:[a[0]*c+d,a[1]*c+d]};this.setValue=function(){f?(a[1]=(arguments[0]-d)/c,l()):2<=arguments.length&&(a[0]=(b.value[0]-d)/c,a[1]=(b.value[1]-d)/c,l())};this.setEnabled=function(a){(n="undefined"==typeof a?!0:a)?
u.removeClass("fsdisabled"):u.addClass("fsdisabled")};this.setEnabled(n);l();return this}})(jQuery);